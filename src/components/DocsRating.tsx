/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

import ExecutionEnvironment from '@docusaurus/ExecutionEnvironment';
import React, { useState } from 'react';

const DocsRating = ({ label }) => {
  if (!ExecutionEnvironment.canUseDOM) {
    return null;
  }

  const [haveVoted, setHaveVoted] = useState(false);
  const giveFeedback = value => {
    console.log("DEBUGPRINT[1]: DocsRating.tsx:23: label=", label, value)
    if (window.gtag) {
      window.gtag('event', 'feedback', {
        'app_name': 'keystone-guide',
        'event_category': 'button',
        'event_label': label,
        'value': value,
        'debug_mode': true
      });
      console.log('gtag called')
    }
    setHaveVoted(true);
  };

  return (
    <div className="docsRating">
      {haveVoted ? (
        <span>Thanks for letting us know!</span>
      ) : (
        <>
          <span>WAS THIS PAGE HELPFUL?</span>
          <div className="vote-box">

            <svg onClick={() => giveFeedback(2)} width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.8984 29.7C8.92344 29.7 1.39844 25.325 1.39844 15.725C1.39844 6.125 8.92344 1.75 15.8984 1.75C19.7734 1.75 23.3484 3.025 25.9984 5.35C28.8734 7.9 30.3984 11.5 30.3984 15.725C30.3984 19.95 28.8734 23.525 25.9984 26.075C23.3484 28.4 19.7484 29.7 15.8984 29.7Z" fill="url(#paint0_radial_3214_20613)" />
              <path d="M12.2485 14.2214L12.211 14.1714L12.1035 14.0339L11.971 13.8914C11.916 13.8289 11.851 13.7689 11.7885 13.7039C11.726 13.6389 11.6485 13.5764 11.5785 13.5239C11.5135 13.4739 11.4435 13.4264 11.3685 13.3889C11.3185 13.3614 11.2635 13.3389 11.206 13.3264C11.1885 13.3239 11.171 13.3239 11.1535 13.3264C11.1535 13.3264 11.1385 13.3264 11.131 13.3264H11.111C11.141 13.3264 11.0435 13.3264 11.1785 13.3264H11.041C11.0035 13.3264 11.0285 13.3264 11.041 13.3264H11.061C11.061 13.3264 11.081 13.3264 11.061 13.3264H11.0335C10.976 13.3389 10.921 13.3589 10.8685 13.3889C10.796 13.4289 10.7235 13.4739 10.6585 13.5239C10.586 13.5789 10.516 13.6389 10.451 13.7039C10.3185 13.8314 10.201 13.9539 10.126 14.0514L9.99595 14.2014L9.93845 14.2689C9.57845 14.6714 8.97095 14.7364 8.53345 14.4214C8.25345 14.2264 8.11095 13.8889 8.16595 13.5514C8.16595 13.5514 8.18345 13.4514 8.23095 13.2739C8.30595 13.0214 8.41095 12.7764 8.54345 12.5464C8.75595 12.1714 9.04345 11.8439 9.38845 11.5839C9.61595 11.4089 9.86845 11.2689 10.1385 11.1714C10.2135 11.1414 10.291 11.1189 10.3685 11.0989C10.451 11.0739 10.5335 11.0564 10.6185 11.0414L10.771 11.0189L10.8985 11.0039H11.036H11.2335H11.361C11.446 11.0039 11.5285 11.0264 11.611 11.0389C11.771 11.0664 11.931 11.1089 12.0835 11.1664C12.3535 11.2639 12.606 11.4039 12.8335 11.5789C13.1785 11.8389 13.466 12.1664 13.6785 12.5414C13.756 12.6714 13.8235 12.8089 13.8785 12.9489C13.926 13.0614 13.966 13.1739 13.9985 13.2914C14.016 13.3514 14.031 13.4114 14.0385 13.4714V13.5339C14.1135 14.0439 13.7585 14.5189 13.2485 14.5939C13.236 14.5964 13.2235 14.5964 13.211 14.5989C12.846 14.6514 12.481 14.5064 12.2485 14.2214Z" fill="#422B0D" />
              <path d="M22.1123 14.2214L22.0723 14.1714L21.9648 14.0339L21.8323 13.8914C21.7773 13.8289 21.7123 13.7689 21.6498 13.7039C21.5873 13.6389 21.5098 13.5764 21.4398 13.5239C21.3748 13.4739 21.3048 13.4264 21.2298 13.3889C21.1798 13.3614 21.1248 13.3389 21.0673 13.3264C21.0498 13.3239 21.0323 13.3239 21.0148 13.3264C21.0148 13.3264 20.9998 13.3264 20.9923 13.3264H20.9723C21.0023 13.3264 20.9048 13.3264 21.0398 13.3264H20.9023C20.8648 13.3264 20.8898 13.3264 20.9023 13.3264H20.9223C20.9223 13.3264 20.9423 13.3264 20.9223 13.3264H20.8948C20.8373 13.3389 20.7823 13.3589 20.7298 13.3889C20.6573 13.4264 20.5873 13.4739 20.5223 13.5239C20.4473 13.5789 20.3773 13.6389 20.3123 13.7039C20.1798 13.8314 20.0623 13.9539 19.9873 14.0514L19.8573 14.2014L19.8023 14.2689C19.4398 14.6714 18.8348 14.7364 18.3948 14.4214C18.1148 14.2264 17.9723 13.8889 18.0273 13.5514C18.0273 13.5514 18.0448 13.4514 18.0948 13.2739C18.1698 13.0189 18.2723 12.7739 18.4073 12.5464C18.6198 12.1714 18.9048 11.8439 19.2498 11.5839C19.4773 11.4089 19.7298 11.2689 19.9998 11.1714C20.0748 11.1414 20.1523 11.1189 20.2298 11.0989C20.3123 11.0739 20.3948 11.0564 20.4798 11.0414L20.6348 11.0189L20.7598 11.0039H20.8973H21.0948H21.2223C21.3073 11.0039 21.3898 11.0264 21.4723 11.0389C21.6348 11.0664 21.7923 11.1089 21.9448 11.1664C22.2148 11.2639 22.4673 11.4039 22.6948 11.5789C23.0398 11.8389 23.3273 12.1664 23.5398 12.5414C23.6173 12.6714 23.6848 12.8089 23.7398 12.9489C23.7873 13.0589 23.8273 13.1714 23.8598 13.2864C23.8773 13.3464 23.8923 13.4064 23.8998 13.4664V13.5289C23.9798 14.0389 23.6298 14.5164 23.1198 14.5964C23.1123 14.5964 23.1048 14.5989 23.0973 14.5989C22.7248 14.6614 22.3473 14.5164 22.1123 14.2214Z" fill="#422B0D" />
              <path d="M25.5161 17.9049C25.1661 17.2724 24.4061 16.9949 23.7311 17.2499C21.1661 17.9974 18.5061 18.3699 15.8336 18.3574C13.1611 18.3699 10.5011 17.9974 7.93607 17.2499C7.26357 16.9949 6.50357 17.2699 6.15357 17.8999C5.81357 18.5274 6.05857 19.2549 6.34607 19.8824C7.95107 23.4074 11.4886 25.5174 15.8136 25.5299H15.8536C20.1786 25.5299 23.7161 23.4074 25.3236 19.8824C25.6086 19.2499 25.8561 18.5324 25.5161 17.9049Z" fill="#422B0D" />
              <path d="M19.8373 24.5343C19.7448 24.4493 19.6498 24.3718 19.5548 24.2843C18.5348 23.3868 17.2148 22.9043 15.8548 22.9318C14.4548 22.9093 13.0923 23.3743 11.9998 24.2493C11.9048 24.3268 11.8048 24.4018 11.7123 24.4993C11.6198 24.5968 11.5698 24.6668 11.5098 24.7493C12.8848 25.2868 14.3498 25.5618 15.8273 25.5543H15.8673C17.2823 25.5543 18.6848 25.3018 20.0098 24.8043C19.9598 24.7093 19.9023 24.6193 19.8373 24.5343Z" fill="#FD645B" />
              <path d="M23.7316 17.249C21.1666 17.9965 18.5066 18.369 15.8341 18.3565C13.1616 18.369 10.5016 17.9965 7.93656 17.249C7.26406 16.994 6.50406 17.269 6.15406 17.899C6.10406 17.994 6.06406 18.094 6.03906 18.1965C6.12156 18.239 6.21656 18.2815 6.32906 18.3265C9.33906 19.834 12.6666 20.599 16.0316 20.559C19.2591 20.5965 22.4491 19.894 25.3641 18.509C25.4816 18.459 25.5791 18.4115 25.6666 18.3665C25.6466 18.204 25.5941 18.044 25.5166 17.899C25.1666 17.269 24.4066 16.9915 23.7316 17.249Z" fill="white" />
              <path d="M25.5261 17.9074C25.1711 17.2749 24.4086 16.9949 23.7286 17.2499C21.1636 17.9974 18.5036 18.3699 15.8336 18.3574C13.1611 18.3699 10.5011 17.9974 7.93607 17.2499C7.26357 16.9949 6.50357 17.2699 6.15357 17.8999C5.81357 18.5274 6.05857 19.2549 6.34607 19.8824C6.47357 20.1649 6.61607 20.4424 6.77357 20.7099C6.77357 20.7099 6.24857 18.7649 6.70357 18.1999C6.85857 17.9599 7.11857 17.8099 7.40357 17.7949C7.52107 17.7949 7.63607 17.8149 7.74857 17.8499C10.3586 18.6174 13.0661 19.0049 15.7886 18.9999H15.8761C18.5986 19.0049 21.3061 18.6174 23.9161 17.8499C24.0286 17.8149 24.1436 17.7949 24.2611 17.7949C24.5461 17.8099 24.8086 17.9599 24.9636 18.1999C25.4261 18.7649 24.8936 20.7174 24.8936 20.7174C25.0486 20.4499 25.2036 20.1749 25.3336 19.8899C25.6186 19.2624 25.8661 18.5374 25.5261 17.9074Z" fill="#EB8F00" />
              <defs>
                <radialGradient id="paint0_radial_3214_20613" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.8984 15.725) scale(14.2399 14.2399)">
                  <stop offset="0.5" stop-color="#FDE030" />
                  <stop offset="0.885417" stop-color="#FFCC41" />
                  <stop offset="1" stop-color="#FFC468" />
                </radialGradient>
              </defs>
            </svg>

            <svg onClick={() => giveFeedback(1)} width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.8984 29.7C8.92344 29.7 1.39844 25.325 1.39844 15.725C1.39844 6.125 8.92344 1.75 15.8984 1.75C19.7734 1.75 23.3484 3.025 25.9984 5.35C28.8734 7.9 30.3984 11.5 30.3984 15.725C30.3984 19.95 28.8734 23.525 25.9984 26.075C23.3484 28.4 19.7484 29.7 15.8984 29.7Z" fill="url(#paint0_radial_3214_20432)" />
              <path d="M22.25 21.999H9.75C9.1975 21.999 8.75 21.5515 8.75 20.999C8.75 20.4465 9.1975 19.999 9.75 19.999H22.25C22.8025 19.999 23.25 20.4465 23.25 20.999C23.25 21.5515 22.8025 21.999 22.25 21.999Z" fill="#422B0D" />
              <path d="M11.168 11.4844C10.1205 11.4844 9.16797 12.3694 9.16797 13.8394C9.16797 15.3094 10.1205 16.1919 11.168 16.1919C12.2155 16.1919 13.168 15.3069 13.168 13.8394C13.168 12.3719 12.2155 11.4844 11.168 11.4844Z" fill="#422B0D" />
              <path d="M11.0716 12.4675C10.7166 12.2975 10.2891 12.4475 10.1166 12.8025C9.98405 13.08 10.0441 13.4125 10.2666 13.6275C10.6216 13.7975 11.0491 13.6475 11.2216 13.2925C11.3541 13.015 11.2941 12.6825 11.0716 12.4675Z" fill="#896024" />
              <path d="M20.75 11.4844C19.7025 11.4844 18.75 12.3694 18.75 13.8394C18.75 15.3094 19.7025 16.1919 20.75 16.1919C21.7975 16.1919 22.75 15.3069 22.75 13.8394C22.75 12.3719 21.8025 11.4844 20.75 11.4844Z" fill="#422B0D" />
              <path d="M20.6575 12.4675C20.3025 12.2975 19.875 12.4475 19.7025 12.8025C19.57 13.08 19.63 13.4125 19.8525 13.6275C20.2075 13.7975 20.635 13.6475 20.8075 13.2925C20.94 13.015 20.88 12.6825 20.6575 12.4675Z" fill="#896024" />
              <defs>
                <radialGradient id="paint0_radial_3214_20432" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.8984 15.725) scale(14.2399 14.2399)">
                  <stop offset="0.5" stop-color="#FDE030" />
                  <stop offset="0.885417" stop-color="#FFCC41" />
                  <stop offset="1" stop-color="#FFC468" />
                </radialGradient>
              </defs>
            </svg>

            <svg onClick={() => giveFeedback(0)} width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.8984 29.7C8.92344 29.7 1.39844 25.325 1.39844 15.725C1.39844 6.125 8.92344 1.75 15.8984 1.75C19.7734 1.75 23.3484 3.025 25.9984 5.35C28.8734 7.9 30.3984 11.5 30.3984 15.725C30.3984 19.95 28.8734 23.525 25.9984 26.075C23.3484 28.4 19.7484 29.7 15.8984 29.7Z" fill="url(#paint0_radial_3214_20420)" />
              <path d="M18.4282 18.5007C18.1807 18.1132 18.2932 17.5957 18.6807 17.3482C18.7457 17.3057 18.8182 17.2732 18.8932 17.2507C19.7382 16.9182 20.6382 16.7382 21.5457 16.7207C22.4532 16.7357 23.3532 16.9057 24.2057 17.2207C24.6582 17.3507 24.9207 17.8232 24.7882 18.2757C24.7682 18.3432 24.7407 18.4107 24.7057 18.4707C24.4507 18.8507 23.9707 19.0082 23.5407 18.8557C22.9132 18.6157 22.2507 18.4807 21.5782 18.4557C20.9032 18.4782 20.2357 18.6132 19.6057 18.8557C19.1782 19.0307 18.6882 18.8832 18.4282 18.5007Z" fill="#422B0D" />
              <path d="M7.27805 18.5007C7.03055 18.1082 7.14805 17.5932 7.54055 17.3457C7.60555 17.3057 7.67555 17.2732 7.75055 17.2507C8.59555 16.9157 9.49555 16.7382 10.4056 16.7207C11.3131 16.7357 12.2131 16.9057 13.0631 17.2207C13.5156 17.3532 13.7756 17.8282 13.6456 18.2807C13.6256 18.3482 13.5981 18.4107 13.5631 18.4707C13.3081 18.8507 12.8281 19.0107 12.3956 18.8557C11.7681 18.6157 11.1056 18.4807 10.4331 18.4557C9.75805 18.4782 9.09055 18.6132 8.46055 18.8557C8.03305 19.0332 7.53805 18.8857 7.27805 18.5007Z" fill="#422B0D" />
              <path d="M15.999 21.7998C18.699 21.7998 20.449 23.7748 20.924 24.6998C21.099 25.0498 21.099 25.3498 20.949 25.4748C20.789 25.5748 20.584 25.5748 20.424 25.4748C20.344 25.4423 20.269 25.3998 20.199 25.3498C18.974 24.4698 17.5065 23.9898 15.999 23.9748C14.4965 23.9948 13.0315 24.4648 11.799 25.3248C11.729 25.3748 11.654 25.4173 11.574 25.4498C11.414 25.5498 11.209 25.5498 11.049 25.4498C10.899 25.2998 10.899 25.0248 11.074 24.6748C11.549 23.7748 13.299 21.7998 15.999 21.7998Z" fill="#422B0D" />
              <path d="M7.41406 14.1293C5.29656 14.1293 3.66406 12.0793 3.66406 10.3218C3.66406 9.08429 4.21656 7.65179 4.99656 5.66679C5.09406 5.37429 5.22406 5.08179 5.35406 4.75429C5.72656 3.82429 6.05656 2.81679 6.55656 1.94429C6.79406 1.51929 7.33156 1.36929 7.75406 1.60679C7.89406 1.68679 8.01156 1.80179 8.09156 1.94429C8.55656 2.80179 8.87406 3.72929 9.35906 4.81179C10.7266 7.87179 11.1091 9.10929 11.1091 10.3468C11.1566 12.0793 9.49906 14.1293 7.41406 14.1293Z" fill="#44B3E6" />
              <path d="M9.70117 11.7817C9.22367 12.5317 8.13867 12.3817 8.13867 11.1542C8.13867 10.3692 8.29867 6.34175 8.97117 6.90425C10.0687 7.82175 10.3812 10.7492 9.70117 11.7817Z" fill="#81D4FA" />
              <defs>
                <radialGradient id="paint0_radial_3214_20420" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.8984 15.725) scale(14.2399 14.2399)">
                  <stop offset="0.5" stop-color="#FDE030" />
                  <stop offset="0.885417" stop-color="#FFCC41" />
                  <stop offset="1" stop-color="#FFC468" />
                </radialGradient>
              </defs>
            </svg>

          </div>
        </>
      )}
    </div>
  );
};

export default DocsRating;
